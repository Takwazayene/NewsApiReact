{"version":3,"sources":["views/Login/index.js","APIs/users.js","actions/user.js","APIs/auth.js","views/Shared/header.js","views/Shared/footer.js","views/Shared/layouts/RegisterAndLogin/index.js"],"names":["Login","useForm","register","handleSubmit","errors","formState","dispatch","useDispatch","title","className","action","method","onSubmit","data","userActions","login","email","password","placeholder","required","pattern","type","maxLength","href","userService","requestOptions","headers","body","JSON","stringify","fetch","then","handleResponse","user","localStorage","setItem","logout","removeItem","response","text","parse","ok","status","location","reload","error","message","statusText","Promise","reject","alertConstants","userConstants","alertActions","success","clear","window","failure","registerUser","request","auth","getItem","token","Authorization","Header","parseUser","pathname","name","onClick","e","Footer","RegisterAndLogin","props","children","history","createBrowserHistory","alert","useSelector","state","listen"],"mappings":"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","file":"static/js/11.f0a401ed.chunk.js","sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch } from 'react-redux';\nimport RegisterAndLogin from '../Shared/layouts/RegisterAndLogin';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { userActions } from '../../actions/user';\n\nexport default function Login() {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const dispatch = useDispatch();\n\n  const onSubmit = data => {\n    if (data) {\n      dispatch(userActions.login(data.email, data.password));\n    }\n  };\n  return (\n    <RegisterAndLogin title=\"Login\">\n      <section className=\" margin-auto\">\n        <form action=\"/\" method=\"post\" onSubmit={handleSubmit(onSubmit)}>\n          <div className=\"row mb-3\">\n            <div className=\"col-md-12\">\n              <div className=\"form-group\">\n                <label className=\"mb-1\">\n                  Email\n                  <label className=\"star\">*</label>\n                </label>\n                <input\n                  className=\"form-control\"\n                  placeholder=\"example@domain.com\"\n                  {...register('email', {\n                    required: true,\n                    pattern: /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,6}$/,\n                  })}\n                />\n                {errors?.email && errors?.email.type === 'required' && <p className=\"error\">This field is required</p>}\n                {errors?.email && errors?.email.type === 'pattern' && <p className=\"error\">Please enter a valid email</p>}\n              </div>\n            </div>\n            <div className=\"col-md-12\">\n              <div className=\"form-group\">\n                <label className=\"mb-1\">\n                  Password\n                  <label className=\"star\">*</label>\n                </label>\n                <input className=\"form-control\" placeholder=\"Password\" type=\"password\" maxLength=\"16\" {...register('password', { required: true })} />\n                {errors?.password && errors?.password.type === 'required' && <p className=\"error\">This field is required</p>}\n              </div>\n            </div>\n          </div>\n          <div className=\"d-flex justify-content-center\">\n            <button type=\"submit\" className=\"btn btn-primary mt-0 mx-0 \">\n              <i className=\"ic icon-angle-left-b\" /> Login\n            </button>\n          </div>\n          <hr />\n          <div className=\"mt-2 d-flex justify-content-center \">\n            do not you have an account?\n            <a className=\"mx-2\" href=\"/register\">\n              Create one\n            </a>\n          </div>\n        </form>\n      </section>\n    </RegisterAndLogin>\n  );\n}\n","import { auth } from './auth';\n\nexport const userService = {\n  login,\n  logout,\n  register,\n};\n\nfunction login(email, password) {\n  const requestOptions = {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ email, password }),\n  };\n\n  return fetch('/users/authenticate', requestOptions)\n    .then(handleResponse)\n    .then(user => {\n      localStorage.setItem('user', JSON.stringify(user));\n      return user;\n    });\n}\n\nfunction logout() {\n  localStorage.removeItem('user');\n}\n\nfunction register(user) {\n  const requestOptions = {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(user),\n  };\n\n  return fetch('/users/register', requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n    if (!response.ok) {\n      if (response.status === 401) {\n        logout();\n        location.reload(true);\n      }\n\n      const error = (data && data.message) || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}\n","import { userService } from '../APIs/users';\n\nexport const alertConstants = {\n  SUCCESS: 'ALERT_SUCCESS',\n  ERROR: 'ALERT_ERROR',\n  CLEAR: 'ALERT_CLEAR',\n};\nexport const userConstants = {\n  REGISTER_REQUEST: 'USERS_REGISTER_REQUEST',\n  REGISTER_SUCCESS: 'USERS_REGISTER_SUCCESS',\n  REGISTER_FAILURE: 'USERS_REGISTER_FAILURE',\n\n  LOGIN_REQUEST: 'USERS_LOGIN_REQUEST',\n  LOGIN_SUCCESS: 'USERS_LOGIN_SUCCESS',\n  LOGIN_FAILURE: 'USERS_LOGIN_FAILURE',\n\n  LOGOUT: 'USERS_LOGOUT',\n};\n\nexport const alertActions = {\n  success,\n  error,\n  clear,\n};\n\nfunction success(message) {\n  return { type: alertConstants.SUCCESS, message };\n}\n\nfunction error(message) {\n  return { type: alertConstants.ERROR, message };\n}\n\nfunction clear() {\n  return { type: alertConstants.CLEAR };\n}\n\nexport const userActions = {\n  login,\n  logout,\n  registerUser,\n};\n\nfunction login(email, password) {\n  return dispatch => {\n    dispatch(request({ email }));\n    userService.login(email, password).then(\n      user => {\n        dispatch(success(user));\n        window.location.href = 'home';\n      },\n      error => {\n        dispatch(failure(error));\n        dispatch(alertActions.error(error));\n      }\n    );\n  };\n\n  function request(user) {\n    return { type: userConstants.LOGIN_REQUEST, user };\n  }\n  function success(user) {\n    return { type: userConstants.LOGIN_SUCCESS, user };\n  }\n  function failure(error) {\n    return { type: userConstants.LOGIN_FAILURE, error };\n  }\n}\n\nfunction logout() {\n  userService.logout();\n  return { type: userConstants.LOGOUT };\n}\n\nfunction registerUser(user) {\n  return dispatch => {\n    dispatch(request(user));\n\n    userService.register(user).then(\n      user => {\n        dispatch(success());\n        window.location.href = 'login';\n        dispatch(alertActions.success('Registration successful'));\n      },\n      error => {\n        dispatch(failure(error));\n        dispatch(alertActions.error(error));\n      }\n    );\n  };\n\n  function request(user) {\n    return { type: userConstants.REGISTER_REQUEST, user };\n  }\n  function success(user) {\n    return { type: userConstants.REGISTER_SUCCESS, user };\n  }\n  function failure(error) {\n    return { type: userConstants.REGISTER_FAILURE, error };\n  }\n}\n","export function auth() {\n  const user = JSON.parse(localStorage.getItem('user'));\n  if (user && user.token) {\n    return { Authorization: `Bearer ${user.token}` };\n  }\n  return {};\n}\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { userActions } from '../../actions/user';\n\nexport default function Header() {\n  const dispatch = useDispatch();\n  const user = localStorage.getItem('user');\n  const parseUser = JSON.parse(user);\n\n  const logOut = e => {\n    dispatch(userActions.logout());\n    window.location.href = 'home';\n  };\n\n  return (\n    <>\n      <header className=\"site-header text-center  mb-0\">\n        <div className=\"menu-container row align-items-center container-fluid mx-auto\">\n          <div className=\"row  menus  mr-auto mr-lg-0  mt-16 mt-lg-0\">\n            <span className=\"col-md-2 site-name\">\n              <a href=\"/\">News</a>\n            </span>\n            {parseUser ? (\n              <span className=\"col-md-4 site-menu\">\n                <a className={window.location.pathname === '/mylist' ? 'active' : ''} href=\"/mylist\">\n                  My List\n                </a>\n              </span>\n            ) : (\n              <span className=\"col-md-4\" />\n            )}\n            <ul className=\" col-md-6 d-flex justify-content-end list-unstyled align-items-center \">\n              {parseUser?.name ? (\n                <>\n                  <li className=\"nav-item px-3\">Hi {parseUser?.name} !</li>{' '}\n                  <li className=\"nav-item\">\n                    <button type=\"button\" onClick={logOut} className=\"btn btn-primary\">\n                      Logout\n                    </button>\n                  </li>\n                </>\n              ) : (\n                <>\n                  <li className=\"nav-item\">\n                    <a className=\"nav-link\" href=\"/login\">\n                      Login\n                    </a>\n                  </li>\n                  <li className=\"nav-item\">\n                    <a className=\"nav-link\" href=\"/register\">\n                      Register\n                    </a>\n                  </li>\n                </>\n              )}\n            </ul>\n          </div>\n        </div>\n      </header>\n    </>\n  );\n}\n","import React from 'react';\n\nexport default function Footer() {\n  return (\n    <>\n      <footer className=\"text-start site-footer d-block mb-5 ms-5 mt-auto\">\n        <p className=\"mb-0\"> © 2022  of France</p>\n        <p className=\"poweredBy\">Powered by Takwa</p>\n      </footer>\n    </>\n  );\n}\n","import React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Header from '../../header';\nimport Footer from '../../footer';\nimport { createBrowserHistory } from 'history';\nimport { alertActions } from '../../../../actions/user';\nimport '../../layouts/_style.scss';\nimport './_style.scss';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\nexport default function RegisterAndLogin(props) {\n  const { children, title } = props;\n  const dispatch = useDispatch();\n  const history = createBrowserHistory();\n  const alert = useSelector(state => state.alert);\n\n  history.listen((location, action) => {\n    dispatch(alertActions.clear());\n  });\n  return (\n    <>\n      <Helmet>\n        <title>{title}</title>\n      </Helmet>\n      <div className=\"outer-container\">\n        {/* <Header />    */}\n        <div className=\"container-root mainWrap\">\n          <div className=\"container d-flex justify-content-center\">\n            <div className=\"card p-5 mt-5\">\n              <div className=\"card-body mx-5 my-2\">\n                <h5 className=\"card-title text-center\">{title}</h5>\n                {alert.message && <div className={`alert ${alert.type}`}>{alert.message}</div>}\n                <p className=\"card-text\">{children}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n        {/* <Footer /> */}\n      </div>\n    </>\n  );\n}\n"],"sourceRoot":""}