(this.webpackJsonpNewsApiReact=this.webpackJsonpNewsApiReact||[]).push([[11],{185:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n(48),c=(n(0),n(52)),s=n(15),i=n(64),a=(n(66),n(41)),l=n(3);function o(){var e=Object(c.b)(),t=e.register,n=e.handleSubmit,o=e.formState.errors,u=Object(s.b)();return Object(l.jsx)(i.a,{title:"Login",children:Object(l.jsx)("section",{className:" margin-auto",children:Object(l.jsxs)("form",{action:"/",method:"post",onSubmit:n((function(e){e&&u(a.b.login(e.email,e.password))})),children:[Object(l.jsxs)("div",{className:"row mb-3",children:[Object(l.jsx)("div",{className:"col-md-12",children:Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsxs)("label",{className:"mb-1",children:["Email",Object(l.jsx)("label",{className:"star",children:"*"})]}),Object(l.jsx)("input",Object(r.a)({className:"form-control",placeholder:"example@domain.com"},t("email",{required:!0,pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/}))),(null===o||void 0===o?void 0:o.email)&&"required"===(null===o||void 0===o?void 0:o.email.type)&&Object(l.jsx)("p",{className:"error",children:"This field is required"}),(null===o||void 0===o?void 0:o.email)&&"pattern"===(null===o||void 0===o?void 0:o.email.type)&&Object(l.jsx)("p",{className:"error",children:"Please enter a valid email"})]})}),Object(l.jsx)("div",{className:"col-md-12",children:Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsxs)("label",{className:"mb-1",children:["Password",Object(l.jsx)("label",{className:"star",children:"*"})]}),Object(l.jsx)("input",Object(r.a)({className:"form-control",placeholder:"Password",type:"password",maxLength:"16"},t("password",{required:!0}))),(null===o||void 0===o?void 0:o.password)&&"required"===(null===o||void 0===o?void 0:o.password.type)&&Object(l.jsx)("p",{className:"error",children:"This field is required"})]})})]}),Object(l.jsx)("div",{className:"d-flex justify-content-center",children:Object(l.jsxs)("button",{type:"submit",className:"btn btn-primary mt-0 mx-0 ",children:[Object(l.jsx)("i",{className:"ic icon-angle-left-b"})," Login"]})}),Object(l.jsx)("hr",{}),Object(l.jsxs)("div",{className:"mt-2 d-flex justify-content-center ",children:["do not you have an account?",Object(l.jsx)("a",{className:"mx-2",href:"/register",children:"Create one"})]})]})})})}},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return O}));n(42);var r={login:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("/users/authenticate",n).then(s).then((function(e){return localStorage.setItem("user",JSON.stringify(e)),e}))},logout:c,register:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/users/register",t).then(s)}};function c(){localStorage.removeItem("user")}function s(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&(c(),location.reload(!0));var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))}var i="ALERT_SUCCESS",a="ALERT_ERROR",l="ALERT_CLEAR",o="USERS_REGISTER_REQUEST",u="USERS_REGISTER_SUCCESS",d="USERS_REGISTER_FAILURE",m="USERS_LOGIN_REQUEST",j="USERS_LOGIN_SUCCESS",b="USERS_LOGIN_FAILURE",h="USERS_LOGOUT",f={success:function(e){return{type:i,message:e}},error:function(e){return{type:a,message:e}},clear:function(){return{type:l}}};var O={login:function(e,t){return function(n){n({type:m,user:{email:e}}),r.login(e,t).then((function(e){n(function(e){return{type:j,user:e}}(e)),window.location.href="home"}),(function(e){n(function(e){return{type:b,error:e}}(e)),n(f.error(e))}))}},logout:function(){return r.logout(),{type:h}},registerUser:function(e){return function(t){t(function(e){return{type:o,user:e}}(e)),r.register(e).then((function(e){t(function(e){return{type:u,user:e}}()),window.location.href="login",t(f.success("Registration successful"))}),(function(e){t(function(e){return{type:d,error:e}}(e)),t(f.error(e))}))}}}},42:function(e,t,n){"use strict";function r(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer ".concat(e.token)}:{}}n.d(t,"a",(function(){return r}))},45:function(e,t,n){},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(15),c=n(41),s=n(3);function i(){var e=Object(r.b)(),t=localStorage.getItem("user"),n=JSON.parse(t);return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("header",{className:"site-header text-center  mb-0",children:Object(s.jsx)("div",{className:"menu-container row align-items-center container-fluid mx-auto",children:Object(s.jsxs)("div",{className:"row  menus  mr-auto mr-lg-0  mt-16 mt-lg-0",children:[Object(s.jsx)("span",{className:"col-md-2 site-name",children:Object(s.jsx)("a",{href:"/",children:"News"})}),n?Object(s.jsx)("span",{className:"col-md-4 site-menu",children:Object(s.jsx)("a",{className:"/mylist"===window.location.pathname?"active":"",href:"/mylist",children:"My List"})}):Object(s.jsx)("span",{className:"col-md-4"}),Object(s.jsx)("ul",{className:" col-md-6 d-flex justify-content-end list-unstyled align-items-center ",children:(null===n||void 0===n?void 0:n.name)?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("li",{className:"nav-item px-3",children:["Hi ",null===n||void 0===n?void 0:n.name," !"]})," ",Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)("button",{type:"button",onClick:function(t){e(c.b.logout()),window.location.href="home"},className:"btn btn-primary",children:"Logout"})})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)("a",{className:"nav-link",href:"/login",children:"Login"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)("a",{className:"nav-link",href:"/register",children:"Register"})})]})})]})})})})}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var r=n(3);function c(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("footer",{className:"text-start site-footer d-block mb-5 ms-5 mt-auto",children:[Object(r.jsx)("p",{className:"mb-0",children:" \xa9 2022  of France"}),Object(r.jsx)("p",{className:"poweredBy",children:"Powered by Takwa"})]})})}},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(0);var r=n(54),c=n(15),s=(n(46),n(47),n(7)),i=n(41),a=(n(45),n(65),n(63),n(3));function l(e){var t=e.children,n=e.title,l=Object(c.b)(),o=Object(s.a)(),u=Object(c.c)((function(e){return e.alert}));return o.listen((function(e,t){l(i.a.clear())})),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(r.a,{children:Object(a.jsx)("title",{children:n})}),Object(a.jsx)("div",{className:"outer-container",children:Object(a.jsx)("div",{className:"container-root mainWrap",children:Object(a.jsx)("div",{className:"container d-flex justify-content-center",children:Object(a.jsx)("div",{className:"card p-5 mt-5",children:Object(a.jsxs)("div",{className:"card-body mx-5 my-2",children:[Object(a.jsx)("h5",{className:"card-title text-center",children:n}),u.message&&Object(a.jsx)("div",{className:"alert ".concat(u.type),children:u.message}),Object(a.jsx)("p",{className:"card-text",children:t})]})})})})})]})}},65:function(e,t,n){},66:function(e,t,n){}}]);
//# sourceMappingURL=11.f0a401ed.chunk.js.map